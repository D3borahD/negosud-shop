<h3>shoppingCart</h3>

{{ dataSource }}
{{ dataSource.length }}

<mat-card class="max-w-7xl mx-auto" *ngIf="dataSource.length">
  <table mat-table [dataSource]="dataSource"
         class="mat-elevation-z8 w-full">

    <ng-container matColumnDef="imageUrl">
      <th mat-header-cell *matHeaderCellDef>Product</th>
      <td mat-cell *matCellDef="let element">
        <img src="{{element}}"
             alt="product"
             class="w-[100px] my-5">
      </td>
      <td mat-footer-cell *matFooterCellDef>
        <button mat-raised-button routerLink="/home">Continue shopping</button>
      </td>
    </ng-container>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let element">
        <span class="truncate max-w-xs block">{{element.product.imageUrl}}</span>
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>
    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef>Price</th>
      <td mat-cell *matCellDef="let element">
        {{element.product.unitePrice | currency:"EUR"}}
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>
    <ng-container matColumnDef="quantity">
      <th mat-header-cell *matHeaderCellDef>Quantity</th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button
                (click)="onRemoveQuantity(element)"
        >
          <mat-icon>remove</mat-icon>
        </button>
        <span>{{element.quantity}}</span>
        <button mat-icon-button
          (click)="onAddQuantity(element)"
        >
          <mat-icon>add</mat-icon>
        </button>

      </td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>
    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef>Total</th>
      <td mat-cell *matCellDef="let element">
        <span>{{ (element.product.price * element.quantity) | currency}}</span>
      </td>
      <td mat-footer-cell *matFooterCellDef>
       <span class="font-bold py-5 block">
         {{ getTotal(cart.items) | currency}}
        </span>
      </td>
    </ng-container>
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>
        <button mat-raised-button color="warn" class="float-right"
                (click)="onClearCart()"
        >
          Clear All
        </button>
      </th>
      <td mat-cell *matCellDef="let element">
        <button mat-mini-fab color="warn" class="float-right"
        (click)="onRemoveFromCart(element)">
          <mat-icon>close</mat-icon>
        </button>
      </td>
      <td mat-footer-cell *matFooterCellDef>
        <button mat-raised-button color="primary" class="float-right">
          Paiement
        </button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
  </table>
</mat-card>
<mat-card *ngIf="!dataSource.length">
  <p>
    Votre panier est vide
   <!-- <button mat-raised-button routerLink="vins">Commencer le shopping</button>-->
  </p>
</mat-card>




<!-- NEGOSUD A ADAPTER !!!!-->

<div class="container d-flex justify-content-between">
  <div class="row" *ngIf="cart$ | async as shopping">
    <!--<div class="d-flex mb-3 background-color-light-grey justify-content-around align-items-center box mr-5 col-11" *ngFor="let product of shopping.products" >
      <img src="assets/images/bottle.png" style="height: 86px;">
      <div>
         <p>{{product.nameProduct}}</p>
        <div class="d-flex">
          <p class="mx-2">{{product.familly.nameFamilly}}</p>
          <p class="mx-2">{{product.house.nameHouse}}</p>
          <p class="mx-2">{{product.year}}</p>
        </div>
      </div>
      <button type="button" (click)="removeProduct()">-</button>
      <div>
        <p>{{quantity}}</p>
      </div>
      <button type="button" (click)="addProduct()">+</button>
      <p>{{product.unitePrice | currency:'EUR'}}</p>
    </div>-->
  </div>
 <div class="background-color-light-grey box p-3 ml-3 col-4 d-flex flex-column justify-content-around" *ngIf="cart$ | async as shopping">
    <p class="font-weight-700 ">ARTICLES</p>
   <!-- <div *ngFor="let product of shopping.products">
      <div class="d-flex justify-content-end rox">
        <p class="col w-100">{{product.nameProduct}}</p>
        <p class="col">{{product.quantity}}</p>
        <p class="col">{{product.unitePrice | currency:'EUR'}}</p>
      </div>
    </div>-->
    <div>
      <p>Total</p>
      <button class="button px-3">Proc√©der au payement</button>
    </div>
  </div>
</div>
